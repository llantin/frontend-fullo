import{r as g,bq as P,j as e,S as O,o as C,br as k,bs as $,aX as B,bt as F,_ as N,an as L,a3 as M,bu as _,X as z,n as q}from"./index-D8RmveFg.js";import{P as U}from"./PageBreadcrumb-Dw5_9Adg.js";import{C as H,a as T,b as R,c as W}from"./Card-C3khdGa0.js";import{P as X}from"./PasswordInputWithStrength-BJfgSFxw.js";import{c as D}from"./authService-QSJREc-7.js";import{T as y}from"./TabContext-Bb0VE2-M.js";import{F as b}from"./Form-BCZM8NW3.js";import"./FormLabel-B53mBRFw.js";import"./FormControl-BP6VLzH_.js";import"./ElementChildren-DUlSq7n6.js";const J=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Q=["activeKey","getControlledId","getControllerId"],Y=["as"];function E(s,n){if(s==null)return{};var t={};for(var a in s)if({}.hasOwnProperty.call(s,a)){if(n.indexOf(a)>=0)continue;t[a]=s[a]}return t}function Z(s){let{active:n,eventKey:t,mountOnEnter:a,transition:o,unmountOnExit:i,role:c="tabpanel",onEnter:d,onEntering:r,onEntered:l,onExit:m,onExiting:x,onExited:u}=s,h=E(s,J);const p=g.useContext(y);if(!p)return[Object.assign({},h,{role:c}),{eventKey:t,isActive:n,mountOnEnter:a,transition:o,unmountOnExit:i,onEnter:d,onEntering:r,onEntered:l,onExit:m,onExiting:x,onExited:u}];const{activeKey:j,getControlledId:f,getControllerId:K}=p,v=E(p,Q),w=C(t);return[Object.assign({},h,{role:c,id:f(t),"aria-labelledby":K(t)}),{eventKey:t,isActive:n==null&&w!=null?C(j)===w:n,transition:o||v.transition,mountOnEnter:a??v.mountOnEnter,unmountOnExit:i??v.unmountOnExit,onEnter:d,onEntering:r,onEntered:l,onExit:m,onExiting:x,onExited:u}]}const S=g.forwardRef((s,n)=>{let{as:t="div"}=s,a=E(s,Y);const[o,{isActive:i,onEnter:c,onEntering:d,onEntered:r,onExit:l,onExiting:m,onExited:x,mountOnEnter:u,unmountOnExit:h,transition:p=P}]=Z(a);return e.jsx(y.Provider,{value:null,children:e.jsx(O.Provider,{value:null,children:e.jsx(p,{in:i,onEnter:c,onEntering:d,onEntered:r,onExit:l,onExiting:m,onExited:x,mountOnEnter:u,unmountOnExit:h,children:e.jsx(t,Object.assign({},o,{ref:n,hidden:!i,"aria-hidden":!i}))})})})});S.displayName="TabPanel";const I=s=>{const{id:n,generateChildId:t,onSelect:a,activeKey:o,defaultActiveKey:i,transition:c,mountOnEnter:d,unmountOnExit:r,children:l}=s,[m,x]=k(o,i,a),u=$(n),h=g.useMemo(()=>t||((j,f)=>u?`${u}-${f}-${j}`:null),[u,t]),p=g.useMemo(()=>({onSelect:x,activeKey:m,transition:c,mountOnEnter:d||!1,unmountOnExit:r||!1,getControlledId:j=>h(j,"tabpane"),getControllerId:j=>h(j,"tab")}),[x,m,c,d,r,h]);return e.jsx(y.Provider,{value:p,children:e.jsx(O.Provider,{value:x||null,children:l})})};I.Panel=S;function G(s){return typeof s=="boolean"?s?B:P:s}const A=({transition:s,...n})=>e.jsx(I,{...n,transition:G(s)});A.displayName="TabContainer";const V="/assets/profile-bg-CYohATZQ.jpg",ee=()=>{const s=localStorage.getItem("user"),n=s?JSON.parse(s):null;return e.jsx(H,{className:"card-top-sticky",children:e.jsxs(T,{children:[e.jsxs("div",{className:"d-flex align-items-center mb-4",children:[e.jsx("div",{className:"me-3 position-relative",children:e.jsx("img",{src:F,alt:"avatar",className:"rounded-circle",width:72,height:72})}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 d-flex align-items-center",children:e.jsx(N,{to:"",className:"link-reset",children:n.person.name+" "+n.person.last_name})}),e.jsx("p",{className:"text-muted mb-2",children:n.role.name})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[e.jsx("div",{className:"avatar-sm text-bg-light bg-opacity-75 d-flex align-items-center justify-content-center rounded-circle",children:e.jsx(L,{className:"fs-xl"})}),e.jsxs("p",{className:"mb-0 fs-sm",children:["Nombre de usuario: ",e.jsx("span",{className:"text-dark fw-semibold",children:n.username})]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[e.jsx("div",{className:"avatar-sm text-bg-light bg-opacity-75 d-flex align-items-center justify-content-center rounded-circle",children:e.jsx(M,{className:"fs-xl"})}),e.jsxs("p",{className:"mb-0 fs-sm",children:["Correo: ",e.jsx(N,{to:"mailto:hello@example.com",className:"text-primary fw-semibold",children:n.person.email})]})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[e.jsx("div",{className:"avatar-sm text-bg-light bg-opacity-75 d-flex align-items-center justify-content-center rounded-circle",children:e.jsx(_,{className:"fs-xl"})}),e.jsxs("p",{className:"mb-0 fs-sm",children:["Telefono: ",e.jsx(N,{to:`https://wa.me/${n.person.phone}`,className:"text-primary fw-semibold",children:n.person.phone})]})]})]})]})})},se=()=>{const[s,n]=g.useState(""),[t,a]=g.useState(""),[o,i]=g.useState(""),c=localStorage.getItem("token"),d=async r=>{if(r.preventDefault(),t!==o){alert("Las nuevas contraseñas no coinciden");return}try{const m=await D({currentPassword:s,newPassword:t,newPassword_confirmation:o},{headers:{Authorization:`Bearer ${c}`}});alert(m.message||"Contraseña actualizada correctamente!"),n(""),a(""),i("")}catch(l){console.error(l),alert(l.response?.data?.message||"Error al actualizar la contraseña")}};return e.jsx("div",{className:"card",children:e.jsxs(A,{defaultActiveKey:"timeline",children:[e.jsx(R,{className:"card-tabs d-flex align-items-center",children:e.jsx("div",{className:"flex-grow-1",children:e.jsx(W,{as:"h4",children:"Cambiar contraseña"})})}),e.jsx(T,{children:e.jsxs(b,{onSubmit:d,children:[e.jsxs("div",{className:"mb-3 form-group",children:[e.jsxs(b.Label,{htmlFor:"currentPassword",children:["Contraseña actual ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(b.Control,{type:"password",id:"currentPassword",placeholder:"••••••••",value:s,onChange:r=>n(r.target.value),required:!0})]}),e.jsx("div",{className:"mb-3",children:e.jsx(X,{id:"newPassword",label:"Nueva contraseña",password:t,setPassword:a,placeholder:"••••••••"})}),e.jsxs("div",{className:"mb-3 form-group",children:[e.jsxs(b.Label,{htmlFor:"confirmPassword",children:["Confirma la nueva contraseña ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(b.Control,{type:"password",id:"confirmPassword",placeholder:"••••••••",value:o,onChange:r=>i(r.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsx(z,{type:"submit",className:"btn btn-primary fw-semibold py-2",children:"Actualizar contraseña"})})]})})]})})},xe=()=>e.jsxs(q,{fluid:!0,children:[e.jsx(U,{title:"Mi perfil"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("article",{className:"card overflow-hidden mb-0",children:e.jsx("div",{className:"position-relative card-side-img overflow-hidden",style:{minHeight:300,backgroundImage:`url(${V})`},children:e.jsxs("div",{className:"p-4 card-img-overlay rounded-start-0 auth-overlay d-flex align-items-center flex-column justify-content-center",children:[e.jsx("h3",{className:"text-white mb-1 fst-italic",children:'"Crafting innovation through clean design"'}),e.jsx("p",{className:"text-white mb-4",children:"– MyStatus"})]})})})})}),e.jsx("div",{className:"px-3 mt-n4",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-xl-4",children:e.jsx(ee,{})}),e.jsx("div",{className:"col-xl-8",children:e.jsx(se,{})})]})})]});export{xe as default};
