import{aC as j,r,j as e,n as g,f as w,C as b,X as v,_ as N,as as y}from"./index-D8RmveFg.js";import{A as C}from"./AppLogo-OtraQJIx.js";import{O as P}from"./OTPInput-C4m6ari_.js";import{P as F}from"./PasswordInputWithStrength-BJfgSFxw.js";import{r as S}from"./authService-QSJREc-7.js";import{C as E}from"./Card-C3khdGa0.js";import{F as k}from"./Form-BCZM8NW3.js";import{F as m}from"./FormLabel-B53mBRFw.js";import{F as u}from"./FormControl-BP6VLzH_.js";import"./ElementChildren-DUlSq7n6.js";const W=()=>{const[n]=j(),i=n.get("email"),t=n.get("code"),[o,x]=r.useState(""),[l,h]=r.useState(""),[c,d]=r.useState(Array(6).fill(""));r.useEffect(()=>{if(t){const s=t.split("").slice(0,6);for(;s.length<6;)s.push("");d(s)}},[t]);const p=async s=>{if(s.preventDefault(),o!==l){alert("Las contraseñas no coinciden");return}try{const a={email:i,token:c.join(""),password:o},f=await S(a);alert(f.message||"Contraseña actualizada correctamente!"),window.location.href="/sign-in"}catch(a){console.error(a),alert(a.response?.data?.message||"Error al actualizar la contraseña")}};return e.jsx("div",{className:"auth-box overflow-hidden align-items-center d-flex",children:e.jsx(g,{children:e.jsx(w,{className:"justify-content-center",children:e.jsxs(b,{xxl:4,md:6,sm:8,children:[e.jsxs(E,{className:"p-4 position-relative",children:[e.jsx("div",{className:"position-absolute top-0 end-0",style:{width:180,opacity:.075},children:e.jsx("svg",{width:600,height:560,viewBox:"0 0 600 560",fill:"none",xmlns:"http://www.w3.org/2000/svg"})}),e.jsxs("div",{className:"auth-brand text-center mb-4",children:[e.jsx(C,{}),e.jsx("p",{className:"text-muted w-lg-75 mt-3 mx-auto",children:"Te hemos enviado un código de 6 dígitos a tu correo electrónico."})]}),e.jsxs(k,{onSubmit:p,children:[e.jsxs("div",{className:"mb-3 form-group",children:[e.jsxs(m,{htmlFor:"userEmail",children:["Correo electrónico ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(u,{type:"email",id:"userEmail",placeholder:"you@example.com",disabled:!0,value:i||""})]}),e.jsx("div",{className:"mb-3 form-group",children:e.jsx(P,{code:c,setCode:d,label:"Ingresa tu código de 6 dígitos"})}),e.jsx("div",{className:"mb-3",children:e.jsx(F,{id:"userPassword",label:"Nueva contraseña",name:"user-password",password:o,setPassword:x,placeholder:"••••••••"})}),e.jsxs("div",{className:"mb-3 form-group",children:[e.jsxs(m,{htmlFor:"userNewPassword",children:["Confirma la nueva contraseña ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(u,{type:"password",id:"userNewPassword",placeholder:"••••••••",value:l,onChange:s=>h(s.target.value),required:!0})]}),e.jsx("div",{className:"d-grid",children:e.jsx(v,{type:"submit",className:"btn btn-primary fw-semibold py-2",children:"Actualizar contraseña"})})]}),e.jsxs("p",{className:"mt-4 text-muted text-center mb-0",children:["Regresar a"," ",e.jsx(N,{to:"/auth-1/sign-in",className:"text-decoration-underline link-offset-3 fw-semibold",children:"Iniciar sesión"})]})]}),e.jsxs("p",{className:"text-center text-muted mt-4 mb-0",children:["© ",y," Fullo"]})]})})})})};export{W as default};
